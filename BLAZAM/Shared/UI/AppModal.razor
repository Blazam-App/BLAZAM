@inherits MudMessageBox
<MudMessageBox OnCancel="OnClosing" Title=@Title @ref="Modal" >
    <MessageContent>
        <MudText Color="Color">
            @ChildContent
        </MudText>
    </MessageContent>
</MudMessageBox>
@code {
    #nullable disable warnings
    [Inject]
    protected AppSnackBarService NotificationService { get; set; }
    [Parameter]
    public IDatabaseContext? Context { get; set; }

    [Parameter]
    public bool AllowClose { get; set; } = true;


    [Parameter]
    public Color Color { get; set; } = Color.Default;

    [Parameter]
    public RenderFragment? ChildContent{ get; set; }

    [CascadingParameter]
    protected MudMessageBox? Modal { get; set; }

    [Parameter]
    public EventCallback<MudMessageBox>? ModalChanged { get; set; }

    bool _isShown = false;

    [Parameter]
    public bool IsShown { get=>_isShown; set
        {
            if(value==_isShown)return;
            _isShown = value;
            IsShownChanged.InvokeAsync(value);
        } }

    [Parameter]
    public EventCallback<bool> IsShownChanged { get; set; }

    //async Task ModalClosing(ModalClosingEventArgs args)
    //{
    //    if (!AllowClose)
    //    {
    //        args.Cancel=true;
    //    }
    //}
    public void Show()
    {

        IsShown = true;
        Modal?.Show();
    }
    public void Hide()
    {
        IsShown = false;

        Modal?.Close();
    }
    private async Task OnClosing(bool modalResult)
    {
        if (!AllowClose)
        {
            Modal.Show();
        }
    }

}
