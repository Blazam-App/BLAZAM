@using BLAZAM.Update;
@inherits AppComponentBase
<MudCard Class="mud-theme-info">
    <MudCardHeader Class="pb-0">

        <ChildContent>
            Available Version
            <MudIconButton Color="Color.Tertiary" Icon="@Icons.Material.Filled.QuestionMark" OnClick=@ShowReleaseNotes />

        </ChildContent>

    </MudCardHeader>
    <MudCardContent>
        @Update.Branch<br />
        <MudText>@Update.Version</MudText>

        @Update.Release.ReleaseTime?.ToLocalTime().DateTime<br />
        @if (ApplicationInfo.InDebugMode)
        {
            <MudButton Disabled=@(AutoUpdateService.IsUpdatedScheduled) Color="Color.Success">Test Auto Update</MudButton>

            <br />
        }
        <MudButton Color=Color.Success OnClick="OnApply">Apply Update</MudButton>


    </MudCardContent>
</MudCard>

<AppModal Title=@(Update?.Version+" Release Notes") @ref="@_releaseNotesModal">
    <ReleaseNotesModalContent Update="Update" />
</AppModal>
@code{
    [Parameter]
    public ApplicationUpdate Update { get; set; }


    [Parameter]
    public EventCallback OnApply { get; set; }


    AppModal? _releaseNotesModal;








    void ShowReleaseNotes()
    {
        _releaseNotesModal?.Show();
    }
}