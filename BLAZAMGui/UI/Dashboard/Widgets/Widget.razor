@inherits AppComponentBase

@code {
    [Parameter]
    public RenderFragment? WidgetContent { get; set; }
    public string Title { get; set; }
    [Parameter]
    public DashboardWidgetType WidgetType { get; set; }
    [Parameter]
    public int ItemsPerPage { get; set; } = 5;
    [CascadingParameter]
    public CurrentUserDashboardWidgets CurrentUserDashboardWidgets { get; set; }

    protected virtual void RowClicked(DataGridRowClickEventArgs<IDirectoryEntryAdapter> args)
    {
        if (args.Item != null)
        {
            GoTo(args.Item);
        }
    }
    protected virtual void GoTo(IDirectoryEntryAdapter args)
    {
        Nav.NavigateTo(args.SearchUri);
    }
    protected async void SetRowsPerPage(int rowPerPage)
    {
        CurrentUser.State.Preferences.DashboardWidgets.FirstOrDefault(w => w.WidgetType.Equals(WidgetType)).ItemsPerPage = rowPerPage;
        CurrentUser.State.SaveDashboardWidgets();
    }
}
