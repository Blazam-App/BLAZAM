@using Microsoft.AspNetCore.Components.Forms;
@inherits AppModalContent
<MudContainer MaxWidth="MaxWidth.ExtraLarge" Class="mud-width-full pa-0">
    <MudTabs @bind-ActivePanelIndex="activePanel" Elevation="2" Rounded="true" ApplyEffectsToContainer="true" PanelClass="pa-6">
        <MudTabPanel Text="Shared Printers">
            <MudDataGrid Elevation=0 Items="Printers.Where(p=>p.ADPrinter==null)" HorizontalScrollbar=true MultiSelection=true>
                <Columns>
                    <SelectColumn />
                    <PropertyColumn Property="x=>x.ShareName" />
                    <PropertyColumn Property="x=>x.Location" />
                    <PropertyColumn Property="x=>x.Comment" />
                    <TemplateColumn>
                        <CellTemplate>
                            <MudButton OnClick="@(()=>{activePanel=1;})">@AppLocalization["Next"]</MudButton>
                        </CellTemplate>
                    </TemplateColumn>

                </Columns>
            </MudDataGrid>
        </MudTabPanel>
        <MudTabPanel Text="@AppLocalization["OU"]">
            <OUTreeView @bind-SelectedOU="destinationOU"/>
        </MudTabPanel>
        
    </MudTabs>
  

</MudContainer>
@code {
    int activePanel = 0;
    IADOrganizationalUnit destinationOU;
    [Parameter]
    public List<SharedPrinter> Printers { get; set; }

    protected override void OnInitialized()
    {
        Modal.Options.FullWidth = true;
        Modal.Options.MaxWidth = MaxWidth.Large;

        // Modal.OnYes = SaveChanges;
        Modal.YesText = AppLocalization["Next"];
        Modal.Title = "Register Printers";
        Modal.YesEnabled = ValidateModal;
        Modal.OnYes = (() => { activePanel = 1; InvokeAsync(StateHasChanged); });
        base.OnInitialized();

        
    }
    
    protected override bool IsValid => true;


}
