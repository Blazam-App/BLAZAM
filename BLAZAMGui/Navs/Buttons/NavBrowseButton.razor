@inherits AppComponentBase
@* <MudNavLink OnClick="@(()=>{Nav.NavigateTo("/browse");})"
            Disabled=@(Monitor.DirectoryConnectionStatus != ServiceConnectionState.Up)
            Icon="@Icons.Material.Filled.ViewList">
    @AppLocalization["Browse"]
</MudNavLink> *@
<MudNavGroup ExpandedChanged=@((value)=>{BrowseExpandedChanged.InvokeAsync(value);})
             Disabled=@(Monitor.DirectoryConnectionStatus != ServiceConnectionState.Up)
             Title="@AppLocalization["Browse"]"
             Icon="@Icons.Material.Filled.ViewList">
    <ADTreeView AdditionalVisibilityFilters=@((entry)=>{if(entry is IADOrganizationalUnit ou) return (ou.CanReadUsersInSubOus || ou.CanReadNonOUs); return false;}) SelectedEntryChanged="@((entry)=>{SelectedEntryChanged.InvokeAsync(entry);})" />
</MudNavGroup>

@code {
    [Parameter]
    public EventCallback<bool> BrowseExpandedChanged { get; set; }
    [Parameter]
    public EventCallback<IDirectoryEntryAdapter> SelectedEntryChanged{ get; set; }

}
